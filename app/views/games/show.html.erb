<script src="//js.pusher.com/4.0/pusher.min.js"></script>

<!-- <div class="col-xs-12 col-md-8 col-md-offset-2 players">
<% if @game.black_player_id == nil %>
<h3>WHITE: <%= get_username(@game.white_player_id)%></h3>
<% else %>
  <h4 class="alignleft">WHITE: <%= get_username(@game.white_player_id)%></h4>
  <h4 class="alignright">BLACK: <%= get_username(@game.black_player_id)%></h4>

<% end %> -->

<div class="container">
  <div class="row">
    <!-- LEFT SIDEBAR -->
    <div class="col-sm-3">
      <!-- PLAYER LABELS -->
      <div class="players">
        <h4 style="text-align: center"><%= @game.name %></h4>
        <h4 class="alignleft player">White Player: <%= get_username(@game.white_player_id)%></h4>
        <h4 class="alignleft player">Black Player: <span id='blackPlayer'></span></h4>
      </div>
      <!-- BUTTON TOOLBAR -->
      <div class="btn-toolbar">
        <div class="btn-group">
            <button type="button" class="btn btn-default">Game Options</button>
            <button type="button" data-toggle="dropdown" class="btn btn-default dropdown-toggle"><span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><button id="btnShowModal" type="button" class="btn btn-warning btn-sm">Offer Draw</button></li>
              <li><button type="button" class="btn btn-danger btn-sm"> <%= link_to 'Resign', forfeit_game_path(@game), method: 'POST', action: :forfeit %></button></li>
              <hr>
              <li class="divider"></li>
              <li><a href="#">Flip Board</a></li>
              <li><a href="#">Show Captured Pieces</a></li>
              <li><a href="#">Show Record of Moves</a></li>
              <li><a href="#">Show Board Coordinates</a></li>
            </ul>
        </div>
      </div>
      <!-- TURN STATUS -->
      <div class="game-status"><br>
        <div class="turn-status">
          <h4 class="turn-notice">Turn Status</h4>
          <p><span class="turn"><%= @game.player_turn %></span></p>
        </div>
      </div>
      <!-- USER STATS -->
      <div class="user-stats"><br>
        <!-- user state? -->
      </div>
    </div>
    <!-- CHESSBOARD -->
    <div class="col-sm-9">
        <table class="chessboard">
          <% (1..8).reverse_each do |column| %>
          <tr class="row">
          <% (1..8).each do |row| %>
            <td class="square" id="<%=row%><%=column%>" data-x="<%=row%>" data-y="<%= column %>">
            </td>
          <% end %>
            </tr>
          <% end %>
        </table>
    </div>
  </div>
  </div>

<script type="text/javascript">
  $(document).ready(function(){
    $('#btnShowModal').click(function () {
      $('#drawModal').modal('show');
    });
});
</script>

      <!-- MODAL -->
      <div class="modal fade" id="drawModal" role="dialog" data-backdrop="static">
      <div class="modal-dialog modal-sm">
      
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"><%= get_username(@game.white_player_id)%> offers a draw</h4>
          </div>
          <!--<div class="modal-body">
            <p>Your opponent offers you a draw.</p>
          </div>-->
          <div class="modal-footer">
            <button type="button" class="btn btn-default btn-lg pull-left"><%= link_to 'Accept', draw_game_path(@game), method: 'POST', action: :draw %></button>
            <button type="button" class="btn btn-default btn-lg pull-right" data-dismiss="modal">Decline</button>
          </div>
        </div>
        
      </div>
    </div>
